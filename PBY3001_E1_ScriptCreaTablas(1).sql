DROP TABLE DETALLE_FACTURA;
DROP TABLE FACTURA;
DROP TABLE PRODUCTO;
DROP TABLE UNIDAD_MEDIDA;
DROP TABLE CLIENTE;
DROP TABLE COMUNA;
DROP TABLE CIUDAD;


Prompt ******  CREANDO TABLA CIUDAD ....

CREATE TABLE CIUDAD  
(
 CODCIUDAD NUMBER, 
 DESCRIPCION VARCHAR2(30)
);

ALTER TABLE CIUDAD 
    ADD CONSTRAINT COD_CIUDAD_PK PRIMARY KEY (CODCIUDAD);

Prompt ******  CREANDO TABLA COMUNA ....

CREATE TABLE COMUNA
(
 CODCOMUNA NUMBER, 
 DESCRIPCION VARCHAR2(30),
 CODCIUDAD NUMBER
);

ALTER TABLE COMUNA 
    ADD CONSTRAINT COD_COMUNA_PK PRIMARY KEY (CODCOMUNA);

ALTER TABLE COMUNA 
    ADD CONSTRAINT COD_CIUDAD_FK FOREIGN KEY (CODCIUDAD) REFERENCES CIUDAD (CODCIUDAD);


Prompt ******  CREANDO TABLA CLIENTE ....

CREATE TABLE CLIENTE
(
  RUTCLIENTE  VARCHAR2(10 BYTE),
  NOMBRE      VARCHAR2(30 BYTE),
  DIRECCION   VARCHAR2(30 BYTE),
  CODCOMUNA   NUMBER,
  TELEFONO    NUMBER(10),
  ESTADO      VARCHAR2(2),
  CREDITO     NUMBER,
  SALDO       NUMBER
);

ALTER TABLE CLIENTE
add CONSTRAINT RUT_CLIENTE_PK
    PRIMARY KEY (RUTCLIENTE);

ALTER TABLE CLIENTE
add CONSTRAINT ESTADO_CLIENTE_CK
    CHECK (ESTADO IN ('A', 'B') );


ALTER TABLE CLIENTE 
    ADD CONSTRAINT COD_COMUNA_FK 
    FOREIGN KEY (CODCOMUNA) REFERENCES COMUNA (CODCOMUNA);


Prompt ******  CREANDO TABLA UNIDAD_MEDIDA ....

CREATE TABLE  UNIDAD_MEDIDA 
   (CODUNIDAD VARCHAR2(2), 
    DESCRIUNIDAD VARCHAR2(30) 
   );

ALTER TABLE UNIDAD_MEDIDA 
      ADD CONSTRAINT COD_UNIDAD_PK 
      PRIMARY KEY (CODUNIDAD);


Prompt ******  CREANDO TABLA PRODUCTO ....

CREATE TABLE  PRODUCTO 
   (CODPRODUCTO   NUMBER, 
    DESCRIPCION   VARCHAR2(40), 
    CODUNIDAD     VARCHAR2(2), 
    VALORPESO     NUMBER(8,2), 
    VALORDOLAR    NUMBER(8,2), 
    TOTALSTOCK    NUMBER,
    STKSEGURIDAD  NUMBER,    
    PROCEDENCIA   VARCHAR2(1)
   );

ALTER TABLE PRODUCTO 
      ADD CONSTRAINT COD_PROD_PK 
      PRIMARY KEY (CODPRODUCTO);

ALTER TABLE PRODUCTO 
      ADD CONSTRAINT COD_UNIDAD_FK 
      FOREIGN KEY (CODUNIDAD) REFERENCES UNIDAD_MEDIDA (CODUNIDAD);



Prompt ******  CREANDO TABLA FACTURA ....

CREATE TABLE FACTURA
(
  NUMFACTURA  NUMBER(10),
  RUTCLIENTE  VARCHAR2(10 BYTE),
  FECHA       DATE,
  NETO        NUMBER,
  IVA         NUMBER,
  TOTAL       NUMBER,
  ESTADO      VARCHAR2(2)
);

alter table factura 
      add constraint num_fact_pk 
      primary key (numfactura);

alter table factura 
      add constraint rut_cli_fk 
      foreign key (rutcliente) references cliente;

ALTER TABLE FACTURA
      add CONSTRAINT ESTADO_FACTURA_CK
      CHECK (ESTADO IN ('EM', 'PA','AN') );



Prompt ******  CREANDO TABLA DETALLE_FACTURA ....

CREATE TABLE DETALLE_FACTURA 
   (NUMFACTURA NUMBER, 
    CODPRODUCTO NUMBER, 
    VUNITARIO NUMBER(8,2), 
    CANTIDAD NUMBER, 
    TOTLINEA NUMBER(8,2)
   );

ALTER TABLE DETALLE_FACTURA 
      ADD CONSTRAINT DET_FACT_PK 
      PRIMARY KEY (NUMFACTURA, CODPRODUCTO);

ALTER TABLE DETALLE_FACTURA 
      ADD CONSTRAINT COD_PROD_FK 
      FOREIGN KEY (CODPRODUCTO) REFERENCES PRODUCTO (CODPRODUCTO);

ALTER TABLE DETALLE_FACTURA 
      ADD CONSTRAINT NUM_FACT_FK 
      FOREIGN KEY (NUMFACTURA) REFERENCES FACTURA (NUMFACTURA);


Prompt ******  INSERTANDO DATOS ....

INSERT INTO CIUDAD VALUES (1,'ARICA');
INSERT INTO CIUDAD VALUES (2,'IQUIQUE');
INSERT INTO CIUDAD VALUES (3,'CALAMA');
INSERT INTO CIUDAD VALUES (4,'ANTOFAGASTA');
INSERT INTO CIUDAD VALUES (5,'COPIAPO');
INSERT INTO CIUDAD VALUES (6,'LA SERENA');
INSERT INTO CIUDAD VALUES (7,'VALPARAISO');
INSERT INTO CIUDAD VALUES (8,'SANTIAGO');
INSERT INTO CIUDAD VALUES (9,'RANCAGUA');
INSERT INTO CIUDAD VALUES (10,'TALCA');
INSERT INTO CIUDAD VALUES (11,'CONCEPCION');
INSERT INTO CIUDAD VALUES (12,'TEMUCO');
INSERT INTO CIUDAD VALUES (13,'VALDIVIA');
INSERT INTO CIUDAD VALUES (14,'OSORNO');
INSERT INTO CIUDAD VALUES (15,'PTO. MONTT');
INSERT INTO CIUDAD VALUES (16,'COYHAIQUE');
INSERT INTO CIUDAD VALUES (17,'PTA. ARENAS');

INSERT INTO COMUNA VALUES (1,'VITACURA',8);
INSERT INTO COMUNA VALUES (2,'ÑUÑOA',8);
INSERT INTO COMUNA VALUES (3,'PEÑALOLEN',8);
INSERT INTO COMUNA VALUES (4,'SANTIAGO',8);
INSERT INTO COMUNA VALUES (5,'VALDIVIA',13);
INSERT INTO COMUNA VALUES (6,'EL LOA',3);
INSERT INTO COMUNA VALUES (7,'CHILLAN',11);
INSERT INTO COMUNA VALUES (8,'PROVIDENCIA',8);
INSERT INTO COMUNA VALUES (9,'PTO.SAAVEDRA',14);

insert into cliente values ('62456789-1','BANCO CHILE','ALAMEDA 6152          ',8,123,'A',1000000,696550);
insert into cliente values ('78123548-2','BANCO SANTANDER','APOQUINDO 1520    ',8,456,'A',1000000,819120);
insert into cliente values ('99124789-3','SUPERMERCADO JUMBO','BILBAO 6200    ',8,558777,'A',1500000,762200);
insert into cliente values ('44567891-4','HOMECENTER','ALAMEDA 960            ',NULL,788222,'A',2500000,2000000);
insert into cliente values ('12456789-5','CODELCO','ALAMEDA 1056              ',8,457784,'A',3000000,2332410);
insert into cliente values ('64677089-6','MALL PLAZA','VICUÑA MACKENNA 4555   ',4,14545,'A',1800000,1800000);
insert into cliente values ('71257945-7','SODIMAC','AV. LA FLORIDA 15554      ',4,65685,'A',500000,500000);
insert into cliente values ('88125781-8','PIZZA HUT','IRARRAZABAL 5452        ',2,45454,'A',450000,450000);
insert into cliente values ('87467912-9','RIPLEY','ALAMEDA 454                ',4,14523,'A',100000,100000);
insert into cliente values ('45446780-0','CCU','PANAMERICANA 152              ',1,5,'A',800000,800000);
insert into cliente values ('88125874-0','OLIDATA','PROVIDENCIA 4587          ',NULL,2785444,'A',1900000,1900000);
insert into cliente values ('58123587-1','LIBRERIA NACIONAL','PROVIDENCIA 5400',NULL,2785444,'A',2500000,2500000);
insert into cliente values ('94444650-7','CRUZ VERDE','AV. GRECIA 152         ',4,2758963,'B',1400000,1400000);
insert into cliente values ('68500777-1','TOYOTA CHILE','PROVIDENCIA 2900     ',NULL,2785444,'A',1200000,1200000);

insert into factura values (11520,'62456789-1','01/03/2008',100000,19000,119000,'EM');
insert into factura values (11521,'78123548-2','02/03/2008',152000,28880,180880,'EM');
insert into factura values (11522,'99124789-3','03/03/2008',620000,117800,737800,'PA');
insert into factura values (11523,'44567891-4','04/03/2008',250000,47500,297500,'EM');
insert into factura values (11524,'12456789-5','05/03/2008',561000,106590,667590,'AN');
insert into factura values (11525,'45446780-0','06/03/2008',120000,22800,142800,'PA');
insert into factura values (11526,'62456789-1','07/03/2008',155000,29450,184450,'PA');
insert into factura values (11527,'44567891-4','07/03/2008',214780,40808,255588,'EM');
insert into factura values (11528,'44567891-4','07/03/2008',200000,38000,238000,'EM');

INSERT INTO UNIDAD_MEDIDA VALUES ('UN','UNITARIO');
INSERT INTO UNIDAD_MEDIDA VALUES ('LT','LITRO');
INSERT INTO UNIDAD_MEDIDA VALUES ('MT','METRO');

INSERT INTO PRODUCTO VALUES (1, 'DDR2 256Mb 533Mhz PC4200             ','UN',00500,0.85 ,620,10,'N');
INSERT INTO PRODUCTO VALUES (2, 'DDR2 512Mb 533Mhz PC4200             ','UN',12500,20.51,010,10,'N');
INSERT INTO PRODUCTO VALUES (3, 'DDR2 1GB 533Mhz PC4200               ','UN',10000,17.09,354,05,'N');
INSERT INTO PRODUCTO VALUES (4, 'DDR2 2GB 533Mhz PC4200               ','UN',05000,08.54,076,10,'I');
INSERT INTO PRODUCTO VALUES (5, 'DVDRW 20x Negro OEM                  ','UN',05250,08.97,089,05,'I');
INSERT INTO PRODUCTO VALUES (6, 'DVDRW 40x Blanco OEM                 ','UN',37850,64.70,067,08,'N');
INSERT INTO PRODUCTO VALUES (7, 'CDROM 20x Negro OEM                  ','UN',01695,02.89,097,07,'N');
INSERT INTO PRODUCTO VALUES (8, 'Disco Duro 40Gb 7200rpm              ','UN',17000,29.05,034,06,'N');
INSERT INTO PRODUCTO VALUES (9, 'Disco Duro 60Gb 7200rpm              ','UN',01695,02.97,055,08,'N');
INSERT INTO PRODUCTO VALUES (10,'Disco Duro 80Gb 7200rpm              ','UN',25000,42.73,035,05,'N');
INSERT INTO PRODUCTO VALUES (11,'Disco Duro 100Gb 7200rpm             ','UN',10000,17.09,354,05,'I');
INSERT INTO PRODUCTO VALUES (12,'Disco Duro 120Gb 7200rpm             ','UN',15000,25.64,070,07,'N');
INSERT INTO PRODUCTO VALUES (13,'Disco Duro 200Gb 7200rpm             ','UN',08522,14.56,069,10,'N');
INSERT INTO PRODUCTO VALUES (14,'Video PCIE GF7300 LE (256/512) DDR2  ','UN',25000,42.73,035,05,'N');
INSERT INTO PRODUCTO VALUES (15,'Teclado Microsoft Base Español PS2   ','UN',25000,42.73,035,05,'N');
INSERT INTO PRODUCTO VALUES (16,'Teclado Beige Base Español PS2       ','UN',18000,30.76,054,10,'I');
INSERT INTO PRODUCTO VALUES (17,'Teclado Microsoft Base Español USB   ','UN',16700,28.54,034,07,'N');
INSERT INTO PRODUCTO VALUES (18,'Camara Web S5502 Black               ','UN',23541,40.24,025,10,'N');
INSERT INTO PRODUCTO VALUES (19,'Camara Web S5502 Beige               ','UN',11750,20.08,055,05,'I');
INSERT INTO PRODUCTO VALUES (20,'Camara Web S5502 White               ','UN',12555,21.46,009,05,'N');
INSERT INTO PRODUCTO VALUES (21,'T/Red PCI DFE-520TX 10/100           ','UN',55000,94.01,100,10,'N');
INSERT INTO PRODUCTO VALUES (22,'T/Red PCI DLINK 10/100               ','UN',45000,76.92,100,15,'N');
INSERT INTO PRODUCTO VALUES (23,'M/B Base Intel P53G Pci-E A/V/L (775)','UN',23541,40.24,012,05,'N');
INSERT INTO PRODUCTO VALUES (24,'M/B Base AMD PG Pci-E A/V/L (775)    ','UN',11750,20.08,100,25,'I');
INSERT INTO PRODUCTO VALUES (25,'M/B Base Intel Gl-2 Pci-E A/V/L (775)','UN',12555,21.46,009,05,'N');
INSERT INTO PRODUCTO VALUES (26,'M/B Base Intel Pci-E A/V/L (775)     ','UN',23541,40.24,025,10,'N');
INSERT INTO PRODUCTO VALUES (27,'M/B Base AMD P530G Pci-E A/V/L (775) ','UN',11924,20.38,036,08,'I');
INSERT INTO PRODUCTO VALUES (28,'Gabinete Base 250w mATX Beige        ','UN',12555,21.46,009,05,'N');
INSERT INTO PRODUCTO VALUES (29,'Gabinete Base 250w mATX Black        ','UN',23541,40.24,012,05,'N');
INSERT INTO PRODUCTO VALUES (30,'Gabinete Base 250w ATX White         ','UN',11750,20.08,100,25,'I');
INSERT INTO PRODUCTO VALUES (31,'Gabinete Base 230w TX Beige          ','UN',23541,40.24,025,10,'N');

INSERT INTO DETALLE_FACTURA VALUES (11520,1,500,10,5000);
INSERT INTO DETALLE_FACTURA VALUES (11520,2,12500,2,25000);
INSERT INTO DETALLE_FACTURA VALUES (11520,3,10000,3,30000);
INSERT INTO DETALLE_FACTURA VALUES (11520,4,5000,4,20000);
INSERT INTO DETALLE_FACTURA VALUES (11521,5,5250.5,7,36753.5);
INSERT INTO DETALLE_FACTURA VALUES (11521,6,37850.5,3,113551.5);
INSERT INTO DETALLE_FACTURA VALUES (11521,7,1695,1,1695);
INSERT INTO DETALLE_FACTURA VALUES (11522,8,17000,9,153000);
INSERT INTO DETALLE_FACTURA VALUES (11522,9,1695.1,5,8475.5);
INSERT INTO DETALLE_FACTURA VALUES (11522,10,25000.5,5,125002.5);
INSERT INTO DETALLE_FACTURA VALUES (11522,11,10000,10,100000);
INSERT INTO DETALLE_FACTURA VALUES (11522,12,15000,15,225000);
INSERT INTO DETALLE_FACTURA VALUES (11522,13,8522,1,8522);
INSERT INTO DETALLE_FACTURA VALUES (11523,14,25000,10,250000);
INSERT INTO DETALLE_FACTURA VALUES (11524,15,25000,10,250000);
INSERT INTO DETALLE_FACTURA VALUES (11524,16,18000,8,144000);
INSERT INTO DETALLE_FACTURA VALUES (11524,17,16700,10,167000);
INSERT INTO DETALLE_FACTURA VALUES (11525,18,23541,2,47082);
INSERT INTO DETALLE_FACTURA VALUES (11525,19,11750.5,3,35251.5);
INSERT INTO DETALLE_FACTURA VALUES (11525,20,12555.5,5,37666.5);
INSERT INTO DETALLE_FACTURA VALUES (11526,21,55000,2,110000);
INSERT INTO DETALLE_FACTURA VALUES (11526,22,45000,1,45000);
INSERT INTO DETALLE_FACTURA VALUES (11527,23,23541,2,47082);
INSERT INTO DETALLE_FACTURA VALUES (11527,24,11750.5,3,35251.5);
INSERT INTO DETALLE_FACTURA VALUES (11527,25,12555.5,5,37666.5);
INSERT INTO DETALLE_FACTURA VALUES (11527,26,23541,2,47082);
INSERT INTO DETALLE_FACTURA VALUES (11527,27,11924.5,4,47698);
INSERT INTO DETALLE_FACTURA VALUES (11528,28,12555,5,62775);
INSERT INTO DETALLE_FACTURA VALUES (11528,29,23541,2,47082);
INSERT INTO DETALLE_FACTURA VALUES (11528,30,11924,4,47698);
INSERT INTO DETALLE_FACTURA VALUES (11528,31,10611.25,4,42445);

COMMIT;

